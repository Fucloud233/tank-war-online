# 游戏部分

## 游戏逻辑


## 联机部分

### 联机逻辑

本项目采用C/S的网络模式，客户端向服务端发送指令、事件和消息，
服务端只提供这些信息的转发，向所有客户端广播。

> 本项目优先考虑服务端是无状态的

* **指令：**移动和发射指令
* **事件：**出现建筑物或坦克被摧毁，（碰撞仍在考虑）
* **消息：**游戏比赛的计分。

### 消息类型

我们使用TCP协议建立连接，使用JSON格式进行文件的封装、传输和解析。
以下是消息内容的定义形式
    
1. 消息发送者: id 
2. 消息类型:
   * 指令（移动,发送子弹）
   
        移动：方向; 发送子弹：发送位置，发送方向
   * 消息（摧毁坦克, 摧毁方块, 终止游戏）
     
        摧毁坦克ID; 摧毁方块位置
3. 消息内容: ...

> 参考内容:
> * https://www.runoob.com/w3cnote/java-json-instro.html 
> * http://c.biancheng.net/view/6114.html

### 多线程

客户端存在两个个线程: 发送线程和接收线程
* 发送部分可以写在主线程内, 即移动或摧毁时可以主动发送"消息" (NIO?)
* 接收部分则需要额外开辟线程, 负责异步接收"状态变化" (考虑如何回调)

服务端n个线程(n: 玩家数), 接收后立即广播
